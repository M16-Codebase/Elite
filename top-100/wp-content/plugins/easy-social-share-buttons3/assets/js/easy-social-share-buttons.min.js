jQuery(document).ready(function(e){var s="twitter,linkedin,facebook,pinterest,google,stumbleupon,vk,reddit,buffer,love,ok,mwp,xing,pocket,mail,print,comments,yummly",n="del,digg,weibo,flattr,tumblr,whatsapp,meneame,blogger,amazon,yahoomail,gmail,aol,newsvine,hackernews,evernote,myspace,mailru,viadeo,line,flipboard,sms,viber,telegram",t=(essb_settings.essb3_plugin_url,essb_settings.essb3_facebook_total),i=essb_settings.essb3_admin_ajax,a=essb_settings.essb3_internal_counter,r=essb_settings.essb3_counter_button_min,o="undefined"!=typeof essb_settings.essb3_no_counter_mailprint?essb_settings.essb3_no_counter_mailprint:!1,c="undefined"!=typeof essb_settings.essb3_single_ajax?essb_settings.essb3_single_ajax:!1,_="undefined"!=typeof essb_settings.twitter_counter?essb_settings.twitter_counter:"",u="undefined"!=typeof essb_settings.google_counter?essb_settings.google_counter:"";""==_&&(_="api"),""==u&&(u="api");var d=function(e){"number"!=typeof e&&(e=Number(e));var s,n,t=0>e?"-":"",i=["k","M","G","T","P","E","Z","Y"],a=Math.pow(10,3*i.length+3);if(e=Math.abs(Math.round(e)),1e3>e)return t+e;if(e>=1e100)return t+"many";if(e>=a)return(t+e).replace(/(\.\d*)?e\+?/i,"e");do if(e=Math.floor(e),s=i.shift(),n=e%1e6,e/=1e3,!(e>=1e3))return e>=10&&1e3>e||10>e&&100>n%1e3?t+Math.floor(e)+s:(t+e).replace(/(\.\d).*/,"$1")+s;while(i.length);return t+"many"};jQuery.fn.essb_get_counters=function(){return this.each(function(){if("undefined"!=typeof essb_settings){var b=e(this).attr("data-essb-counter-pos")||"",l=e(this).attr("data-essb-postid")||"",p=e(this).attr("data-essb-url")||"",h=e(this).attr("data-essb-twitter-url")||"",f=e(this).attr("data-essb-instance")||"",g=essb_settings.ajax_url;"light"==essb_settings.ajax_type&&(g=essb_settings.blog_url);for(var m=i?g+"?action=essb_counts&nonce="+essb_settings.essb3_nonce+"&":essb_settings.essb3_plugin_url+"/public/get-noapi-counts.php?",k=g+"?action=essb_counts&nonce="+essb_settings.essb3_nonce+"&",v=s.split(","),w=n.split(","),y=[],j=[],$=[],x=0;x<v.length;x++)if(e(this).find(".essb_link_"+v[x]).length)switch(v[x]){case"stumbleupon":case"vk":case"reddit":case"ok":case"mwp":case"xing":case"pocket":case"linkedin":i?$.push(v[x]):j.push(v[x]);break;case"love":case"comments":$.push(v[x]);break;case"mail":case"print":o||$.push(v[x]);break;case"twitter":"api"==_||"newsc"==_?y.push(v[x]):"self"==_&&$.push(v[x]);break;case"google":"self"==u?$.push(v[x]):j.push(v[x]);break;default:y.push(v[x])}if(a)for(var x=0;x<w.length;x++)e(this).find(".essb_link_"+w[x]).length&&$.push(w[x]);for(var N={},x=0;x<y.length;x++){var J=y[x];switch(N[J+""+f]=e(this).find(".essb_link_"+J),N[J+"_inside"+f]=N[J+f].find(".essb_network_name"),J){case"facebook":var O="https://graph.facebook.com/?id="+p;e.getJSON(O).done(function(e){t?P(b,N["facebook"+f],N["facebook_inside"+f],e.share.share_count):P(b,N["facebook"+f],N["facebook_inside"+f],e.share.share_count)});break;case"twitter":var S=h,h="https://cdn.api.twitter.com/1/urls/count.json?url="+h+"&callback=?";"newsc"==_&&(h="https://public.newsharecounts.com/count.json?url="+S),e.getJSON(h).done(function(e){console.log(e),P(b,N["twitter"+f],N["twitter_inside"+f],e.count)});break;case"linkedin":var I="https://www.linkedin.com/countserv/count/share?format=jsonp&url="+p+"&callback=?";console.log(I),e.getJSON(I).done(function(e){P(b,N["linkedin"+f],N["linkedin_inside"+f],e.count)});break;case"pinterest":var M="https://api.pinterest.com/v1/urls/count.json?callback=?&url="+p;e.getJSON(M).done(function(e){P(b,N["pinterest"+f],N["pinterest_inside"+f],e.count)});break;case"buffer":var Q="https://api.bufferapp.com/1/links/shares.json?url="+p+"&callback=?";e.getJSON(Q).done(function(e){P(b,N["buffer"+f],N["buffer_inside"+f],e.shares)});break;case"yummly":var z="https://www.yummly.com/services/yum-count?callback=?&url="+p;e.getJSON(z).done(function(e){P(b,N["yummly"+f],N["yummly_inside"+f],e.count)})}}for(var x=0;x<j.length;x++){var J=j[x];N[J+f]=e(this).find(".essb_link_"+J),N[J+"_inside"+f]=N[J+f].find(".essb_network_name");var E=m+"nw="+J+"&url="+p+"&instance="+f;e.getJSON(E).done(function(e){e.network+"|"+e.url;P(b,N[e.network+e.instance],N[e.network+"_inside"+e.instance],e.count)})}for(var G=[],x=0;x<$.length;x++){var J=$[x];if(G.push(J),N[J+f]=e(this).find(".essb_link_"+J),N[J+"_inside"+f]=N[J+f].find(".essb_network_name"),!c){var E=k+"nw="+J+"&url="+p+"&instance="+f+"&post="+l;e.getJSON(E).done(function(e){var s=e[e.network]||"0";P(b,N[e.network+e.instance],N[e.network+"_inside"+e.instance],s)})}}if(G.length>0&&c){var E=k+"nw="+G.join(",")+"&url="+p+"&instance="+f+"&post="+l;e.getJSON(E).done(function(e){for(var s=0;s<G.length;s++){var n=G[s],t=e[n]||"0";P(b,N[n+e.instance],N[n+"_inside"+e.instance],t)}})}var P=function(e,s,n,t){if($css_hidden_negative="",""!=r&&parseInt(r)>parseInt(t)&&($css_hidden_negative=' style="display: none;"'),"right"==e)s.append('<span class="essb_counter_right" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>");else if("inside"==e)n.html('<span class="essb_counter_inside" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>");else if("insidename"==e)n.append('<span class="essb_counter_insidename" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>");else if("insidehover"==e){n.closest("a").append('<span class="essb_counter_insidehover" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>");var i=n.closest("a").find(".essb_network_name").innerWidth();n.closest("a").find(".essb_counter_insidehover").width(i)}else"insidebeforename"==e?n.prepend('<span class="essb_counter_insidebeforename" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>"):"bottom"==e?n.html('<span class="essb_counter_bottom" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>"):"hidden"==e?s.append('<span class="essb_counter_hidden" cnt="'+t+'"'+$css_hidden_negative+"></span>"):"topn"==e?s.find("a").prepend('<span class="essb_counter_topn" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>"):s.prepend('<span class="essb_counter" cnt="'+t+'"'+$css_hidden_negative+">"+d(t)+"</span>")}}})},jQuery.fn.essb_update_counters=function(){return this.each(function(){function s(){var s=0,i=t,c=r.attr("data-counter-pos")||"";""!=c&&(i=c);var _="";switch(i){case"rightm":case"right":_=".essb_counter_right";break;case"inside":_=".essb_counter_inside";break;case"bottom":_=".essb_counter_bottom";break;case"insidename":_=".essb_counter_insidename";break;case"insidebeforename":_=".essb_counter_insidebeforename";break;case"insidehover":_=".essb_counter_insidehover";break;case"hidden":_=".essb_counter_hidden";break;case"topn":_=".essb_counter_topn";break;default:_=".essb_counter"}n.find(_).each(function(){s+=parseInt(e(this).attr("cnt"));var n=parseInt(e(this).attr("cnt"));a||(n=d(n),e(this).text(n))}),""!=u?a.html(d(s)+'<span class="essb_t_nb_after">'+u+"</span>"):a.text(d(s)),""!=o&&parseInt(o)<=s&&r.show()}var n=e(this).find(".essb_links_list"),t=e(this).attr("data-essb-counter-pos")||"",i=n.find(".essb_totalcount"),a=i.find(".essb_t_nb"),r=n.find(".essb_totalcount_item"),o=r.attr("data-essb-hide-till")||"",c=i.attr("title")||"",_=i.attr("title_after")||"",u=i.attr("data-shares-text")||"";"undefined"==typeof c&&(c=""),"undefined"==typeof _&&(_=""),""!=c&&i.prepend('<span class="essb_total_text">'+c+"</span>"),setInterval(s,1200)})},e(".essb_links.essb_counters").essb_get_counters(),e(".essb_links.essb_counters").essb_update_counters()});